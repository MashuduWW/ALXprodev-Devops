!/bin/bash

POKEMON_URL="https://pokeapi.co/api/v2/pokemon/pikachu"

OUTPUT_FILE="data.json"
ERROR_FILE="errors.txt"

curl -s -w "%{http_code}" -o "$OUTPUT_FILE" "$POKEMON_URL" > status.txt

STATUS=$(cat status.txt)

if [ "$STATUS" -ne 200 ]; then
  echo "[$(date)] Failed to fetch Pikachu data. Status code: $STATUS" >> "$ERROR_FILE"
  rm -f "$OUTPUT_FILE"  
else
  echo "Pikachu data retrieved successfully and saved to $OUTPUT_FILE"
fi

rm -f status.txt
